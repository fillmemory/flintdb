/* Auto-generated from webui.html */
/* Do not edit this file directly */

"<!doctype html>\n"
"<html lang=\"en\">\n"
"<head>\n"
"<title>FlintDB</title>\n"
"<meta charSet=\"utf-8\"/>\n"
"<meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0\">\n"
"</head>\n"
"<body>\n"
"	<div class=\"container\">\n"
"		<div class=\"sidebar\" id=\"sidebar\">\n"
"			<div class=\"sidebar-header\"><span>Tables</span><button type=\"button\" id=\"btn-refresh\" class=\"icon-btn\" title=\"Refresh Tables\">âŸ³</button></div>\n"
"			<div id=\"table-list\" class=\"table-list\"></div>\n"
"			<div class=\"sidebar-header\"><span>Query History</span><button type=\"button\" id=\"btn-clear-history\" class=\"icon-btn\" title=\"Clear Query History\">ğŸ—‘</button></div>\n"
"			<div id=\"query-history-list\" class=\"query-history-list\">\n"
"				<div id=\"query-history-items\" class=\"history-items\"></div>\n"
"			</div>\n"
"		</div>\n"
"		\n"
"		<div class=\"resizer\" id=\"resizer\"></div>\n"
"		\n"
"		<div class=\"main-content\">\n"
"			<form id=\"editor\" autocomplete=\"off\">\n"
"				<div class=\"toolbar\">\n"
"					<div class=\"toolbar-right\">\n"
"						<button type=\"button\" id=\"btn-toggle-sidebar\" title=\"Toggle Sidebar\">Sidebar</button>\n"
"						<button type=\"button\" id=\"btn-go\">Run</button>\n"
"						<button type=\"button\" id=\"btn-download-csv\" title=\"Download CSV\" disabled>Download CSV</button>\n"
"						<button type=\"button\" id=\"btn-table-layout\" title=\"Toggle Table Layout (Fixed/Auto)\">Layout: Auto</button>\n"
"						<button type=\"button\" id=\"btn-reset-warning\" title=\"Reset page leave warning\">Reset Warning</button>\n"
"					</div>\n"
"				</div>\n"
"\n"
"				<div class=\"editor\">\n"
"					<textarea id=\"u\" style=\"display: none\"></textarea>\n"
"					<textarea id=\"q\" class=\"scrollbar\">SHOW TABLES WHERE . OPTION -R</textarea>\n"
"				</div>\n"
"\n"
"				<div id=\"result\" style=\"margin-top: 20px\" class=\"scrollbar\"></div>\n"
"			</form>\n"
"		</div>\n"
"	</div>\n"
"</body>\n"
"</html>\n"
"\n"
"<script>\n"
"	// í˜„ì¬ ê²°ê³¼ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì „ì—­ ë³€ìˆ˜\n"
"	var currentResultData = null;\n"
"	var currentColumnTypes = null; // inferred types per column: number|date|time|string\n"
"	var sortState = {\n"
"		columnIndex: -1,\n"
"		ascending: true\n"
"	};\n"
"	\n"
"	// í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ìƒíƒœ\n"
"	var tableLayoutFixed = false;\n"
"	\n"
"	// ì¿¼ë¦¬ íˆìŠ¤í† ë¦¬ ê´€ë ¨ ë³€ìˆ˜\n"
"	var queryHistory = [];\n"
"	var maxHistorySize = 50;\n"
"	\n"
"	// í˜ì´ì§€ ë‚˜ê°€ê¸° í™•ì¸ ê´€ë ¨ ë³€ìˆ˜\n"
"	var hasUnsavedChanges = false;\n"
"	var hasExecutedQuery = false;\n"
"\n"
"	function inferColumnTypes(data) {\n"
"		if (!data || data.length <= 1) return [];\n"
"		var header = data[0];\n"
"		var types = new Array(header.length).fill('string');\n"
"		for (var c = 0; c < header.length; c++) {\n"
"			var sawNum = false, sawDate = false, sawTime = false, sawOther = false;\n"
"			for (var r = 1; r < data.length; r++) {\n"
"				var v = data[r][c];\n"
"				if (v == null || v === '') continue;\n"
"				if (typeof v !== 'string') v = String(v);\n"
"				// ê³¼í•™ì  í‘œê¸°ë²•(scientific notation)ì„ í¬í•¨í•œ ìˆ«ì ì¸ì‹: 1.23, -45.67, 1e10, 1.23e-4 ë“±\n"
"				if (/^-?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?$/.test(v)) { sawNum = true; continue; }\n"
"				if (/^\\d{4}-\\d{2}-\\d{2}$/.test(v)) { sawDate = true; continue; }\n"
"				if (/^\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?$/.test(v)) { sawTime = true; continue; }\n"
"				sawOther = true; break;\n"
"			}\n"
"			if (sawNum && !sawOther && !sawDate && !sawTime) types[c] = 'number';\n"
"			else if (sawDate && !sawOther && !sawNum && !sawTime) types[c] = 'date';\n"
"			else if (sawTime && !sawOther && !sawNum && !sawDate) types[c] = 'time';\n"
"		}\n"
"		return types;\n"
"	}\n"
"\n"
"	function rows(data, keepSortState) {\n"
"		var $result = document.querySelector(\"#result\");\n"
"		$result.innerHTML = \"\";\n"
"\n"
"		// í˜„ì¬ ê²°ê³¼ ë°ì´í„° ì €ì¥\n"
"		currentResultData = data;\n"
"		\n"
"		// ì •ë ¬ ìƒíƒœ ì´ˆê¸°í™” (ìƒˆë¡œìš´ ì¿¼ë¦¬ ê²°ê³¼ì¼ ë•Œë§Œ) ë° íƒ€ì… ì¬ì¶”ë¡ \n"
"		if (!keepSortState) {\n"
"			sortState.columnIndex = -1;\n"
"			sortState.ascending = true;\n"
"			currentColumnTypes = inferColumnTypes(data);\n"
"		} else if (!currentColumnTypes) {\n"
"			currentColumnTypes = inferColumnTypes(data);\n"
"		}\n"
"		\n"
"		// ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸\n"
"		var $downloadBtn = document.querySelector(\"#btn-download-csv\");\n"
"		if (data.length > 0) {\n"
"			$downloadBtn.disabled = false;\n"
"		} else {\n"
"			$downloadBtn.disabled = true;\n"
"		}\n"
"\n"
"		if (data.length == 0)\n"
"			return;\n"
"\n"
"		// í…Œì´ë¸” ì»¨í…Œì´ë„ˆ ìƒì„±\n"
"		var $tableContainer = document.createElement(\"div\");\n"
"		$tableContainer.className = \"table-container\";\n"
"		$result.appendChild($tableContainer);\n"
"\n"
"		// ë‹¨ì¼ í…Œì´ë¸” ìƒì„±\n"
"		var $table = document.createElement(\"table\");\n"
"		$table.className = \"data-table\";\n"
"		\n"
"		// í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ì ìš©\n"
"		if (tableLayoutFixed) {\n"
"			$table.classList.add(\"fixed-layout\");\n"
"		} else {\n"
"			$table.classList.add(\"auto-layout\");\n"
"		}\n"
"		\n"
"		$tableContainer.appendChild($table);\n"
"\n"
"		// í—¤ë” ìƒì„±\n"
"		var $thead = document.createElement(\"thead\");\n"
"		$table.appendChild($thead);\n"
"		var $headerRow = document.createElement(\"tr\");\n"
"		$thead.appendChild($headerRow);\n"
"\n"
"		// ë°”ë”” ìƒì„±\n"
"		var $tbody = document.createElement(\"tbody\");\n"
"		$table.appendChild($tbody);\n"
"\n"
"		var isSingleColumn = (data[0].length === 1);\n"
"		if (isSingleColumn) {\n"
"			$table.classList.add(\"single-column\");\n"
"		}\n"
"\n"
"		// í—¤ë” ì…€ ìƒì„±\n"
"		data[0].forEach(function(column, index) {\n"
"			var $th = document.createElement(\"th\");\n"
"			$headerRow.appendChild($th);\n"
"			$th.textContent = column;\n"
"			$th.setAttribute(\"title\", column);\n"
"			$th.dataset.columnIndex = index;\n"
"			$th.style.cursor = \"pointer\";\n"
"			$th.classList.add(\"sortable\");\n"
"			\n"
"			// ì •ë ¬ ì•„ì´ì½˜ ì»¨í…Œì´ë„ˆ ì¶”ê°€\n"
"			var $sortIcon = document.createElement(\"span\");\n"
"			$sortIcon.className = \"sort-icon\";\n"
"			$sortIcon.innerHTML = \"â†•\";\n"
"			$th.appendChild($sortIcon);\n"
"			\n"
"			// í—¤ë” í´ë¦­ ì´ë²¤íŠ¸\n"
"			$th.addEventListener(\"click\", function() {\n"
"				sortTable(parseInt(this.dataset.columnIndex));\n"
"			});\n"
"		});\n"
"\n"
"		// ë°ì´í„° í–‰ ìƒì„± (í—¤ë” ê¸¸ì´ì— ë§ì¶° íŒ¨ë”©)\n"
"		var colCount = data[0].length;\n"
"		for (var i = 1; i < data.length; i++) {\n"
"			var $tr = document.createElement(\"tr\");\n"
"			$tbody.appendChild($tr);\n"
"			for (var c = 0; c < colCount; c++) {\n"
"				var column = (data[i][c] !== undefined) ? data[i][c] : null;\n"
"				var $td = document.createElement(\"td\");\n"
"				if (currentColumnTypes && currentColumnTypes[c]) {\n"
"					$td.classList.add('col-' + currentColumnTypes[c]);\n"
"				}\n"
"				$tr.appendChild($td);\n"
"				if (column == null) {\n"
"					$td.classList.add(\"null-value\");\n"
"				} else {\n"
"					var displayText = column;\n"
"					if (typeof column === 'string') {\n"
"						displayText = column\n"
"							.replace(/\\\\n/g, '\\n')\n"
"							.replace(/\\\\t/g, '\\t')\n"
"							.replace(/\\\\r/g, '\\r')\n"
"							.replace(/\\\\\\\"/g, '\"')\n"
"							.replace(/\\\\'/g, \"'\")\n"
"							.replace(/\\\\\\\\/g, '\\\\')\n"
"							.replace(/\\\\u0027/g, \"'\");\n"
"						if (displayText.includes('\\n')) {\n"
"							$td.classList.add('multiline');\n"
"						}\n"
"					}\n"
"					$td.textContent = displayText;\n"
"					$td.setAttribute(\"title\", displayText);\n"
"				}\n"
"				$td.addEventListener(\"dblclick\", function(e) {\n"
"					e.preventDefault();\n"
"					var sel = window.getSelection();\n"
"					var range = document.createRange();\n"
"					range.selectNodeContents(this);\n"
"					sel.removeAllRanges();\n"
"					sel.addRange(range);\n"
"				});\n"
"			}\n"
"		}\n"
"	}\n"
"\n"
"	function encode(s) {\n"
"		var buffer = new TextEncoder().encode(s).buffer;\n"
"		return [...new Uint8Array(buffer)]\n"
"		    .map(x => x.toString(16).padStart(2, '0'))\n"
"		    .join('');\n"
"	}\n"
"\n"
"	function run(u, q, callback) {\n"
"		// ë²„íŠ¼ ë¹„í™œì„±í™”\n"
"		var $btnGo = document.querySelector(\"#btn-go\");\n"
"		$btnGo.disabled = true;\n"
"		$btnGo.textContent = \"Running...\";\n"
"		$btnGo.classList.add(\"running\");\n"
"		\n"
"		var xhr = new XMLHttpRequest();\n"
"		xhr.open(\"POST\", document.location.pathname, true);\n"
"		xhr.onerror = function(event) {\n"
"			console.log(\"error\", event);\n"
"			// ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”\n"
"			$btnGo.disabled = false;\n"
"			$btnGo.textContent = \"Run\";\n"
"			$btnGo.classList.remove(\"running\");\n"
"			callback([[\"ERROR\"], [\"Network error\"]]);\n"
"		};\n"
"		xhr.onprogress = function(event) {\n"
"			if (event.lengthComputable) {\n"
"				console.log(\"progress\", event.loaded, event.total);\n"
"			}\n"
"		};\n"
"		xhr.onloadend = function(event) {\n"
"			console.log(\"progress\", \"complete\");\n"
"			//progressBar.value = event.loaded;\n"
"		};\n"
"		xhr.onload = function(event) {\n"
"			// ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”\n"
"			$btnGo.textContent = \"Run\";\n"
"			$btnGo.disabled = false;\n"
"			$btnGo.classList.remove(\"running\");\n"
"			\n"
"			var status = this.status;\n"
"			var type = xhr.getResponseHeader(\"content-type\");\n"
"			// 200 OK + (100~599) ë²”ìœ„ì˜ ì‘ë‹µì´ë¼ë„ application/json ì´ë©´ ë™ì¼í•˜ê²Œ JSON ì²˜ë¦¬\n"
"			// (ë¦¬ë‹¤ì´ë ‰íŠ¸/í´ë¼ì´ì–¸íŠ¸/ì„œë²„ ì—ëŸ¬ë¥¼ JSON payload ë¡œ í‘œ í˜•íƒœë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•¨)\n"
"			if (type && type.indexOf(\"application/json\") == 0) {\n"
"				try {\n"
"					var result = JSON.parse(xhr.response);\n"
"					callback(result);\n"
"				} catch (e) {\n"
"					callback([[\"ERROR\"], [\"Invalid JSON response\"]]);\n"
"				}\n"
"			} else if (status == 200 && type && type.indexOf(\"text/plain\") == 0) {\n"
"				callback([[\"text/plain\"], [xhr.response]]);\n"
"			} else if (status == 200) {\n"
"				// 200 ì´ì§€ë§Œ ìš°ë¦¬ê°€ ì¸ì‹í•˜ì§€ ëª»í•œ íƒ€ì… -> ë‹¨ìˆœ í…ìŠ¤íŠ¸ë¡œ ê°ì‹¸ê¸°\n"
"				callback([[\"text\"], [xhr.response]]);\n"
"			} else {\n"
"				// JSON ì•„ë‹ˆë©´ ê¸°ì¡´ ì—ëŸ¬ ì²˜ë¦¬\n"
"				callback([[\"ERROR\"], [status + \" \" + this.statusText]]);\n"
"			}\n"
"		};\n"
"		xhr.send(JSON.stringify({\n"
"			a : [],\n"
"			u : u,\n"
"			q : q, // encode(q)\n"
"		}));\n"
"	}\n"
"\n"
"	function loadTables() {\n"
"		run(\"\", \"SHOW TABLES WHERE . OPTION -R\", function(data) {\n"
"			var $tableList = document.querySelector(\"#table-list\");\n"
"			$tableList.innerHTML = \"\";\n"
"			if (data.length > 1) {\n"
"				// í—¤ë” í™•ì¸ (Path, Bytes, Modified, Format, Rows ë“±)\n"
"				var headers = data[0];\n"
"				var pathIndex = headers.indexOf(\"Path\");\n"
"				var bytesIndex = headers.indexOf(\"Bytes\");\n"
"				var modifiedIndex = headers.indexOf(\"Modified\");\n"
"				var formatIndex = headers.indexOf(\"Format\");\n"
"				var rowsIndex = headers.indexOf(\"Rows\");\n"
"\n"
"				data = new Array(data[0]).concat(data.slice(1).sort(function(a, b) {\n"
"					// // Path ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬\n"
"					// var pathA = a[pathIndex] || a[0];\n"
"					// var pathB = b[pathIndex] || b[0];\n"
"					// return pathA.localeCompare(pathB);\n"
"					return 0;\n"
"				}));\n"
"				\n"
"				for (var i = 1; i < data.length; i++) {\n"
"					var row = data[i];\n"
"					var tablePath = row[pathIndex] || row[0];\n"
"					var tableBytes = row[bytesIndex] || \"\";\n"
"					var tableModified = row[modifiedIndex] || \"\";\n"
"					var tableFormat = row[formatIndex] || \"\";\n"
"					var tableRows = row[rowsIndex] || \"\";\n"
"					\n"
"					if (tablePath) {\n"
"						var $tableItem = document.createElement(\"div\");\n"
"						$tableItem.className = \"table-item\";\n"
"						\n"
"						// í¬ë§·ì— ë”°ë¥¸ ì•„ì´ì½˜ ìƒì„±\n"
"						var $icon = document.createElement(\"span\");\n"
"						$icon.className = \"table-icon\";\n"
"						\n"
"						var isTextFormat = tableFormat && (tableFormat.includes(\"tsv\") || tableFormat.includes(\"csv\"));\n"
"						var isTableFormat = tableFormat && tableFormat.includes(\"table\");\n"
"						\n"
"						if (isTextFormat) {\n"
"							$icon.innerHTML = \"ğŸ“„\"; // í…ìŠ¤íŠ¸ íŒŒì¼ ì•„ì´ì½˜\n"
"							$icon.className += \" text-format\";\n"
"							$icon.title = \"Text Format (\" + tableFormat + \")\";\n"
"						} else if (isFlintFormat) {\n"
"							$icon.innerHTML = \"ğŸ—‚ï¸\"; // ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë² ì´ìŠ¤ ì•„ì´ì½˜  \n"
"							$icon.className += \" flint-format\";\n"
"							$icon.title = \"Lite Format (\" + tableFormat + \")\";\n"
"						} else {\n"
"							$icon.innerHTML = \"ğŸ“‹\"; // ê¸°ë³¸ í…Œì´ë¸” ì•„ì´ì½˜\n"
"							$icon.className += \" default-format\";\n"
"							$icon.title = \"Table (\" + (tableFormat || \"unknown\") + \")\";\n"
"						}\n"
"						\n"
"						// ì•„ì´ì½˜ê³¼ í…Œì´ë¸”ëª…ì„ í¬í•¨í•˜ëŠ” ì»¨í…Œì´ë„ˆ\n"
"						var $content = document.createElement(\"div\");\n"
"						$content.className = \"table-item-content\";\n"
"						\n"
"						var $name = document.createElement(\"span\");\n"
"						$name.className = \"table-name\";\n"
"						$name.textContent = tablePath;\n"
"						\n"
"						$content.appendChild($icon);\n"
"						$content.appendChild($name);\n"
"						$tableItem.appendChild($content);\n"
"						\n"
"						// í…Œì´ë¸” ì •ë³´ë¥¼ ë°ì´í„° ì†ì„±ìœ¼ë¡œ ì €ì¥\n"
"						$tableItem.dataset.path = tablePath;\n"
"						$tableItem.dataset.format = tableFormat;\n"
"						$tableItem.dataset.bytes = tableBytes;\n"
"						$tableItem.dataset.modified = tableModified;\n"
"						$tableItem.dataset.rows = tableRows;\n"
"						\n"
"						// ì»¤ìŠ¤í…€ íˆ´íŒ ì´ë²¤íŠ¸\n"
"						$tableItem.addEventListener(\"mouseenter\", function(e) {\n"
"							showTooltip(e, this);\n"
"						});\n"
"						\n"
"						$tableItem.addEventListener(\"mouseleave\", function() {\n"
"							hideTooltip();\n"
"						});\n"
"						\n"
"						$tableItem.addEventListener(\"click\", function(e) {\n"
"							showTableMenu(e, this);\n"
"						});\n"
"						\n"
"						$tableList.appendChild($tableItem);\n"
"					}\n"
"				}\n"
"			}\n"
"		});\n"
"	}\n"
"\n"
"	function showTableMenu(event, tableItem) {\n"
"		event.preventDefault();\n"
"		event.stopPropagation();\n"
"		\n"
"		// ê¸°ì¡´ ë©”ë‰´ ì œê±°\n"
"		var existingMenu = document.querySelector(\".table-menu\");\n"
"		if (existingMenu) {\n"
"			existingMenu.remove();\n"
"		}\n"
"		\n"
"		var tablePath = tableItem.dataset.path;\n"
"		var tableFormat = tableItem.dataset.format;\n"
"		\n"
"		var $menu = document.createElement(\"div\");\n"
"		$menu.className = \"table-menu\";\n"
"		$menu.style.position = \"absolute\";\n"
"		$menu.style.left = event.pageX + \"px\";\n"
"		$menu.style.top = event.pageY + \"px\";\n"
"		\n"
"		// SELECT ë©”ë‰´ í•­ëª©\n"
"		var $selectItem = document.createElement(\"div\");\n"
"		$selectItem.className = \"menu-item\";\n"
"		$selectItem.textContent = \"SELECT\";\n"
"		$selectItem.addEventListener(\"click\", function() {\n"
"			var $q = document.querySelector(\"#q\");\n"
"			$q.value = \"SELECT * FROM \" + tablePath + \" LIMIT 100\";\n"
"			runSQL();\n"
"			$menu.remove();\n"
"		});\n"
"		$menu.appendChild($selectItem);\n"
"		\n"
"		// í¬ë§·ì— ë”°ë¥¸ ì¶”ê°€ ë©”ë‰´\n"
"		var isTextFormat = tableFormat && (\n"
"			tableFormat.includes(\"tsv\") \n"
"			|| tableFormat.includes(\"csv\") \n"
"			|| tableFormat.includes(\"parquet\")\n"
"			|| tableFormat.includes(\"jsonl\")\n"
"		);\n"
"		var isTableFormat = tableFormat && tableFormat.includes(\"table\");\n"
"		\n"
"		if (isTextFormat || isFlintFormat) {\n"
"			// DESC ë©”ë‰´ í•­ëª©\n"
"			var $descItem = document.createElement(\"div\");\n"
"			$descItem.className = \"menu-item\";\n"
"			$descItem.textContent = \"DESC\";\n"
"			$descItem.addEventListener(\"click\", function() {\n"
"				var $q = document.querySelector(\"#q\");\n"
"				$q.value = \"DESC \" + tablePath + \"\";\n"
"				runSQL();\n"
"				$menu.remove();\n"
"			});\n"
"			$menu.appendChild($descItem);\n"
"		}\n"
"		\n"
"		if (isTextFormat || isFlintFormat) {\n"
"			// META ë©”ë‰´ í•­ëª©\n"
"			var $metaItem = document.createElement(\"div\");\n"
"			$metaItem.className = \"menu-item\";\n"
"			$metaItem.textContent = \"META\";\n"
"			$metaItem.addEventListener(\"click\", function() {\n"
"				var $q = document.querySelector(\"#q\");\n"
"				$q.value = \"META \" + tablePath + \"\";\n"
"				runSQL();\n"
"				$menu.remove();\n"
"			});\n"
"			$menu.appendChild($metaItem);\n"
"		}\n"
"		\n"
"		document.body.appendChild($menu);\n"
"		\n"
"		// ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°\n"
"		setTimeout(function() {\n"
"			document.addEventListener(\"click\", function closeMenu() {\n"
"				$menu.remove();\n"
"				document.removeEventListener(\"click\", closeMenu);\n"
"			});\n"
"		}, 0);\n"
"	}\n"
"\n"
"	function showTooltip(event, tableItem) {\n"
"		hideTooltip(); // ê¸°ì¡´ íˆ´íŒ ì œê±°\n"
"		\n"
"		var $tooltip = document.createElement(\"div\");\n"
"		$tooltip.className = \"custom-tooltip\";\n"
"		$tooltip.id = \"custom-tooltip\";\n"
"		\n"
"		var path = tableItem.dataset.path;\n"
"		var format = tableItem.dataset.format;\n"
"		var bytes = tableItem.dataset.bytes;\n"
"		var modified = tableItem.dataset.modified;\n"
"		var rows = tableItem.dataset.rows;\n"
"		\n"
"		var html = \"<div class='tooltip-title'>Table Information</div>\";\n"
"		html += \"<div class='tooltip-row'><span class='tooltip-label'>Path:</span> <span class='tooltip-value'>\" + path + \"</span></div>\";\n"
"		if (rows) html += \"<div class='tooltip-row'><span class='tooltip-label'>Rows:</span> <span class='tooltip-value'>\" + rows + \"</span></div>\";\n"
"		if (bytes) html += \"<div class='tooltip-row'><span class='tooltip-label'>Bytes:</span> <span class='tooltip-value'>\" + bytes + \"</span></div>\";\n"
"		if (modified) html += \"<div class='tooltip-row'><span class='tooltip-label'>Modified:</span> <span class='tooltip-value'>\" + modified + \"</span></div>\";\n"
"		if (format) html += \"<div class='tooltip-row'><span class='tooltip-label'>Format:</span> <span class='tooltip-value'>\" + format + \"</span></div>\";\n"
"		\n"
"		$tooltip.innerHTML = html;\n"
"		\n"
"		document.body.appendChild($tooltip);\n"
"		\n"
"		// ìœ„ì¹˜ ê³„ì‚°\n"
"		var rect = tableItem.getBoundingClientRect();\n"
"		$tooltip.style.left = (rect.right + 10) + \"px\";\n"
"		$tooltip.style.top = rect.top + \"px\";\n"
"		\n"
"		// í™”ë©´ ê²½ê³„ í™•ì¸ ë° ì¡°ì •\n"
"		var tooltipRect = $tooltip.getBoundingClientRect();\n"
"		if (tooltipRect.right > window.innerWidth) {\n"
"			$tooltip.style.left = (rect.left - tooltipRect.width - 10) + \"px\";\n"
"		}\n"
"		if (tooltipRect.bottom > window.innerHeight) {\n"
"			$tooltip.style.top = (rect.bottom - tooltipRect.height) + \"px\";\n"
"		}\n"
"	}\n"
"\n"
"	function hideTooltip() {\n"
"		var $tooltip = document.getElementById(\"custom-tooltip\");\n"
"		if ($tooltip) {\n"
"			$tooltip.remove();\n"
"		}\n"
"	}\n"
"\n"
"	function sortTable(columnIndex) {\n"
"		if (!currentResultData || currentResultData.length <= 1) {\n"
"			return;\n"
"		}\n"
"		\n"
"		// ì •ë ¬ ë°©í–¥ ê²°ì •\n"
"		if (sortState.columnIndex === columnIndex) {\n"
"			sortState.ascending = !sortState.ascending;\n"
"		} else {\n"
"			sortState.columnIndex = columnIndex;\n"
"			sortState.ascending = true;\n"
"		}\n"
"		\n"
"		// í—¤ë”ë¥¼ ì œì™¸í•œ ë°ì´í„°ë§Œ ì •ë ¬\n"
"		var header = currentResultData[0];\n"
"		var dataRows = currentResultData.slice(1);\n"
"		\n"
"		// ë°ì´í„° ì •ë ¬\n"
"		var colType = currentColumnTypes ? currentColumnTypes[columnIndex] : null;\n"
"		dataRows.sort(function(a, b) {\n"
"			var aVal = a[columnIndex];\n"
"			var bVal = b[columnIndex];\n"
"			if (aVal == null && bVal == null) return 0;\n"
"			if (aVal == null) return sortState.ascending ? 1 : -1;\n"
"			if (bVal == null) return sortState.ascending ? -1 : 1;\n"
"			if (colType === 'number') {\n"
"				var aNum = parseFloat(aVal); var bNum = parseFloat(bVal);\n"
"				return sortState.ascending ? (aNum - bNum) : (bNum - aNum);\n"
"			} else if (colType === 'date') {\n"
"				// YYYY-MM-DD lexical compare works but parse for robustness\n"
"				var aTime = Date.parse(aVal + 'T00:00:00Z');\n"
"				var bTime = Date.parse(bVal + 'T00:00:00Z');\n"
"				if (isNaN(aTime) || isNaN(bTime)) {\n"
"					return sortState.ascending ? (aVal.localeCompare(bVal)) : (bVal.localeCompare(aVal));\n"
"				}\n"
"				return sortState.ascending ? (aTime - bTime) : (bTime - aTime);\n"
"			} else if (colType === 'time') {\n"
"				// HH:MM:SS(.fff)\n"
"				var timeToMs = function(v){\n"
"					var m = /^([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\\.([0-9]+))?$/.exec(v);\n"
"					if (!m) return NaN;\n"
"					var ms = (+m[1])*3600000 + (+m[2])*60000 + (+m[3])*1000;\n"
"					if (m[4]) { var frac = m[4].slice(0,3); while(frac.length<3) frac+='0'; ms += parseInt(frac,10); }\n"
"					return ms;\n"
"				};\n"
"				var aMs = timeToMs(aVal), bMs = timeToMs(bVal);\n"
"				if (isNaN(aMs) || isNaN(bMs)) {\n"
"					return sortState.ascending ? (String(aVal).localeCompare(String(bVal))) : (String(bVal).localeCompare(String(aVal)));\n"
"				}\n"
"				return sortState.ascending ? (aMs - bMs) : (bMs - aMs);\n"
"			} else {\n"
"				var aStr = String(aVal).toLowerCase();\n"
"				var bStr = String(bVal).toLowerCase();\n"
"				if (aStr < bStr) return sortState.ascending ? -1 : 1;\n"
"				if (aStr > bStr) return sortState.ascending ? 1 : -1;\n"
"				return 0;\n"
"			}\n"
"		});\n"
"		\n"
"		// í—¤ë”ì™€ ì •ë ¬ëœ ë°ì´í„° ê²°í•©\n"
"		var sortedData = [header].concat(dataRows);\n"
"		\n"
"		// í…Œì´ë¸” ë‹¤ì‹œ ë Œë”ë§ (ì •ë ¬ ìƒíƒœ ìœ ì§€)\n"
"		rows(sortedData, true);\n"
"		\n"
"		// ì •ë ¬ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸\n"
"		updateSortIcons();\n"
"	}\n"
"\n"
"	function updateSortIcons() {\n"
"		var $headers = document.querySelectorAll(\".data-table th.sortable\");\n"
"		$headers.forEach(function($th, index) {\n"
"			var $sortIcon = $th.querySelector(\".sort-icon\");\n"
"			if (parseInt($th.dataset.columnIndex) === sortState.columnIndex) {\n"
"				$sortIcon.innerHTML = sortState.ascending ? \"â†‘\" : \"â†“\";\n"
"				$th.classList.add(\"sorted\");\n"
"			} else {\n"
"				$sortIcon.innerHTML = \"â†•\";\n"
"				$th.classList.remove(\"sorted\");\n"
"			}\n"
"		});\n"
"	}\n"
"\n"
"	function downloadCSV() {\n"
"		if (!currentResultData || currentResultData.length === 0) {\n"
"			alert(\"No data to download\");\n"
"			return;\n"
"		}\n"
"\n"
"		// CSV ë°ì´í„° ìƒì„±\n"
"		var csvContent = \"\";\n"
"		\n"
"		// í—¤ë” ì²˜ë¦¬\n"
"		if (currentResultData.length > 0) {\n"
"			var headers = currentResultData[0].map(function(header) {\n"
"				return escapeCSVField(String(header || \"\"));\n"
"			});\n"
"			csvContent += headers.join(\",\") + \"\\n\";\n"
"		}\n"
"		\n"
"		// ë°ì´í„° í–‰ ì²˜ë¦¬\n"
"		for (var i = 1; i < currentResultData.length; i++) {\n"
"			var row = currentResultData[i].map(function(field) {\n"
"				if (field === null || field === undefined) {\n"
"					return \"\";\n"
"				}\n"
"				return escapeCSVField(String(field));\n"
"			});\n"
"			csvContent += row.join(\",\") + \"\\n\";\n"
"		}\n"
"\n"
"		// íŒŒì¼ ë‹¤ìš´ë¡œë“œ\n"
"		var blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n"
"		var link = document.createElement(\"a\");\n"
"		var url = URL.createObjectURL(blob);\n"
"		link.setAttribute(\"href\", url);\n"
"		\n"
"		// íŒŒì¼ëª… ìƒì„± (í˜„ì¬ ë‚ ì§œ/ì‹œê°„ í¬í•¨)\n"
"		var now = new Date();\n"
"		var timestamp = now.getFullYear() + \n"
"			String(now.getMonth() + 1).padStart(2, '0') + \n"
"			String(now.getDate()).padStart(2, '0') + '_' +\n"
"			String(now.getHours()).padStart(2, '0') + \n"
"			String(now.getMinutes()).padStart(2, '0') + \n"
"			String(now.getSeconds()).padStart(2, '0');\n"
"		\n"
"		link.setAttribute(\"download\", \"query_result_\" + timestamp + \".csv\");\n"
"		link.style.visibility = 'hidden';\n"
"		document.body.appendChild(link);\n"
"		link.click();\n"
"		document.body.removeChild(link);\n"
"	}\n"
"\n"
"	function escapeCSVField(field) {\n"
"		// CSV í•„ë“œ ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬\n"
"		if (field.includes('\"') || field.includes(',') || field.includes('\\n') || field.includes('\\r')) {\n"
"			// ë”°ì˜´í‘œë¥¼ ë‘ ë²ˆ ì—°ì†ìœ¼ë¡œ ì¨ì„œ ì´ìŠ¤ì¼€ì´í”„\n"
"			return '\"' + field.replace(/\"/g, '\"\"') + '\"';\n"
"		}\n"
"		return field;\n"
"	}\n"
"\n"
"	// ì¿¼ë¦¬ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ í•¨ìˆ˜ë“¤\n"
"	function loadQueryHistory() {\n"
"		try {\n"
"			var stored = localStorage.getItem('flintdb_query_history');\n"
"			if (stored) {\n"
"				queryHistory = JSON.parse(stored);\n"
"			}\n"
"		} catch (e) {\n"
"			console.error('Error loading query history:', e);\n"
"			queryHistory = [];\n"
"		}\n"
"		updateQueryHistoryDisplay();\n"
"	}\n"
"\n"
"	function saveQueryHistory() {\n"
"		try {\n"
"			localStorage.setItem('flintdb_query_history', JSON.stringify(queryHistory));\n"
"		} catch (e) {\n"
"			console.error('Error saving query history:', e);\n"
"		}\n"
"	}\n"
"\n"
"	function addToQueryHistory(query) {\n"
"		// SELECT ì¿¼ë¦¬ë§Œ íˆìŠ¤í† ë¦¬ì— ì¶”ê°€\n"
"		var trimmedQuery = query.trim();\n"
"		if (!trimmedQuery.toUpperCase().startsWith('SELECT')) {\n"
"			return;\n"
"		}\n"
"		\n"
"		// ì¤‘ë³µ ì œê±° (ë™ì¼í•œ ì¿¼ë¦¬ê°€ ìˆìœ¼ë©´ ì œê±°)\n"
"		queryHistory = queryHistory.filter(function(item) {\n"
"			return item.query !== trimmedQuery;\n"
"		});\n"
"		\n"
"		// ìƒˆ ì¿¼ë¦¬ë¥¼ ë§¨ ì•ì— ì¶”ê°€\n"
"		queryHistory.unshift({\n"
"			query: trimmedQuery,\n"
"			timestamp: new Date().toISOString(),\n"
"			displayTime: new Date().toLocaleString()\n"
"		});\n"
"		\n"
"		// ìµœëŒ€ í¬ê¸° ì œí•œ\n"
"		if (queryHistory.length > maxHistorySize) {\n"
"			queryHistory = queryHistory.slice(0, maxHistorySize);\n"
"		}\n"
"		\n"
"		saveQueryHistory();\n"
"		updateQueryHistoryDisplay();\n"
"	}\n"
"\n"
"	function updateQueryHistoryDisplay() {\n"
"		var $historyItems = document.querySelector(\"#query-history-items\");\n"
"		if(!$historyItems) return; // fallback\n"
"		$historyItems.innerHTML = \"\";\n"
"		\n"
"		if (queryHistory.length === 0) {\n"
"			var $emptyMsg = document.createElement(\"div\");\n"
"			$emptyMsg.className = \"history-empty\";\n"
"			$emptyMsg.textContent = \"No query history\";\n"
"			$historyItems.appendChild($emptyMsg);\n"
"			return;\n"
"		}\n"
"		\n"
"		queryHistory.forEach(function(item, index) {\n"
"			var $historyItem = document.createElement(\"div\");\n"
"			$historyItem.className = \"history-item\";\n"
"			\n"
"			var $queryText = document.createElement(\"div\");\n"
"			$queryText.className = \"history-query\";\n"
"			// ê¸´ ì¿¼ë¦¬ëŠ” ì¤„ì„í‘œë¡œ í‘œì‹œ\n"
"			var displayQuery = item.query.length > 50 ? \n"
"				item.query.substring(0, 50) + \"...\" : item.query;\n"
"			$queryText.textContent = displayQuery;\n"
"			$queryText.title = item.query; // ì „ì²´ ì¿¼ë¦¬ë¥¼ íˆ´íŒìœ¼ë¡œ\n"
"			\n"
"			var $timeText = document.createElement(\"div\");\n"
"			$timeText.className = \"history-time\";\n"
"			$timeText.textContent = item.displayTime;\n"
"			\n"
"			var $deleteBtn = document.createElement(\"button\");\n"
"			$deleteBtn.className = \"history-delete\";\n"
"			$deleteBtn.innerHTML = \"Ã—\";\n"
"			$deleteBtn.title = \"Delete this query\";\n"
"			$deleteBtn.addEventListener(\"click\", function(e) {\n"
"				e.stopPropagation();\n"
"				deleteQueryHistory(index);\n"
"			});\n"
"			\n"
"			$historyItem.appendChild($queryText);\n"
"			$historyItem.appendChild($timeText);\n"
"			$historyItem.appendChild($deleteBtn);\n"
"			\n"
"			$historyItem.addEventListener(\"click\", function() {\n"
"				loadQueryFromHistory(item.query);\n"
"			});\n"
"			\n"
"			$historyItems.appendChild($historyItem);\n"
"		});\n"
"	}\n"
"\n"
"	function loadQueryFromHistory(query) {\n"
"		var $q = document.querySelector(\"#q\");\n"
"		$q.value = query;\n"
"		$q.focus();\n"
"		\n"
"		// ì¿¼ë¦¬ê°€ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ unsaved changesë¡œ í‘œì‹œ\n"
"		hasUnsavedChanges = true;\n"
"	}\n"
"\n"
"	function deleteQueryHistory(index) {\n"
"		queryHistory.splice(index, 1);\n"
"		saveQueryHistory();\n"
"		updateQueryHistoryDisplay();\n"
"	}\n"
"\n"
"	function clearQueryHistory() {\n"
"		if (confirm(\"Are you sure you want to clear all query history?\")) {\n"
"			queryHistory = [];\n"
"			saveQueryHistory();\n"
"			updateQueryHistoryDisplay();\n"
"		}\n"
"	}\n"
"\n"
"	// í˜ì´ì§€ ë‚˜ê°€ê¸° ê²½ê³  ë¦¬ì…‹ ê¸°ëŠ¥\n"
"	function resetLeaveWarning() {\n"
"		hasUnsavedChanges = false;\n"
"		hasExecutedQuery = false;\n"
"		alert(\"Page leave warning has been reset. You can now navigate away without warnings.\");\n"
"	}\n"
"\n"
"	// í…Œì´ë¸” ë ˆì´ì•„ì›ƒ í† ê¸€ ê¸°ëŠ¥\n"
"	function toggleTableLayout() {\n"
"		tableLayoutFixed = !tableLayoutFixed;\n"
"		\n"
"		// ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸\n"
"		var $layoutBtn = document.querySelector(\"#btn-table-layout\");\n"
"		$layoutBtn.textContent = \"Layout: \" + (tableLayoutFixed ? \"Fixed\" : \"Auto\");\n"
"		$layoutBtn.title = \"Toggle Table Layout (\" + (tableLayoutFixed ? \"Fixed\" : \"Auto\") + \")\";\n"
"		\n"
"		// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì„¤ì • ì €ì¥\n"
"		localStorage.setItem('flintdb_table_layout_fixed', tableLayoutFixed.toString());\n"
"		\n"
"		// í˜„ì¬ í…Œì´ë¸”ì´ ìˆë‹¤ë©´ ë‹¤ì‹œ ë Œë”ë§\n"
"		if (currentResultData && currentResultData.length > 0) {\n"
"			rows(currentResultData, true);\n"
"		}\n"
"	}\n"
"\n"
"	// í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ì„¤ì • ë¡œë“œ\n"
"	function loadTableLayoutSetting() {\n"
"		var saved = localStorage.getItem('flintdb_table_layout_fixed');\n"
"		if (saved !== null) {\n"
"			tableLayoutFixed = saved === 'true';\n"
"		}\n"
"		\n"
"		// ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸\n"
"		var $layoutBtn = document.querySelector(\"#btn-table-layout\");\n"
"		if ($layoutBtn) {\n"
"			$layoutBtn.textContent = \"Layout: \" + (tableLayoutFixed ? \"Fixed\" : \"Auto\");\n"
"			$layoutBtn.title = \"Toggle Table Layout (\" + (tableLayoutFixed ? \"Fixed\" : \"Auto\") + \")\";\n"
"		}\n"
"	}\n"
"\n"
"	// ì‚¬ì´ë“œë°” ë¦¬ì‚¬ì´ì € ê¸°ëŠ¥\n"
"	function initSidebarResizer() {\n"
"		var resizer = document.getElementById('resizer');\n"
"		var sidebar = document.getElementById('sidebar');\n"
"		var isResizing = false;\n"
"		var startX = 0;\n"
"		var startWidth = 0;\n"
"		\n"
"		// ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì €ì¥ëœ ì‚¬ì´ë“œë°” í­ ë¶ˆëŸ¬ì˜¤ê¸°\n"
"		var savedWidth = localStorage.getItem('flintdb_sidebar_width');\n"
"		if (savedWidth) {\n"
"			sidebar.style.width = savedWidth + 'px';\n"
"		}\n"
"		\n"
"		resizer.addEventListener('mousedown', function(e) {\n"
"			isResizing = true;\n"
"			startX = e.clientX;\n"
"			startWidth = parseInt(window.getComputedStyle(sidebar).width, 10);\n"
"			\n"
"			document.body.style.cursor = 'col-resize';\n"
"			document.body.style.userSelect = 'none';\n"
"			\n"
"			e.preventDefault();\n"
"		});\n"
"		\n"
"		document.addEventListener('mousemove', function(e) {\n"
"			if (!isResizing) return;\n"
"			\n"
"			var newWidth = startWidth + (e.clientX - startX);\n"
"			\n"
"			// ìµœì†Œ/ìµœëŒ€ í­ ì œí•œ\n"
"			if (newWidth < 150) newWidth = 150;\n"
"			if (newWidth > 500) newWidth = 500;\n"
"			\n"
"			sidebar.style.width = newWidth + 'px';\n"
"			\n"
"			// ìˆ¨ê¹€ ìƒíƒœì˜ marginë„ ì—…ë°ì´íŠ¸\n"
"			var style = document.querySelector('style');\n"
"			var cssText = style.textContent;\n"
"			var regex = /\\.sidebar\\.hidden\\s*{\\s*margin-left:\\s*-\\d+px;/;\n"
"			var newRule = '.sidebar.hidden { margin-left: -' + newWidth + 'px;';\n"
"			\n"
"			if (regex.test(cssText)) {\n"
"				style.textContent = cssText.replace(regex, newRule);\n"
"			}\n"
"		});\n"
"		\n"
"		document.addEventListener('mouseup', function() {\n"
"			if (isResizing) {\n"
"				isResizing = false;\n"
"				document.body.style.cursor = '';\n"
"				document.body.style.userSelect = '';\n"
"				\n"
"				// í˜„ì¬ í­ì„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥\n"
"				var currentWidth = parseInt(window.getComputedStyle(sidebar).width, 10);\n"
"				localStorage.setItem('flintdb_sidebar_width', currentWidth);\n"
"			}\n"
"		});\n"
"		\n"
"		// ë”ë¸”í´ë¦­ìœ¼ë¡œ ê¸°ë³¸ í¬ê¸°ë¡œ ë¦¬ì…‹\n"
"		resizer.addEventListener('dblclick', function() {\n"
"			sidebar.style.width = '250px';\n"
"			localStorage.setItem('flintdb_sidebar_width', '250');\n"
"			\n"
"			// CSS ê·œì¹™ë„ ì—…ë°ì´íŠ¸\n"
"			var style = document.querySelector('style');\n"
"			var cssText = style.textContent;\n"
"			var regex = /\\.sidebar\\.hidden\\s*{\\s*margin-left:\\s*-\\d+px;/;\n"
"			var newRule = '.sidebar.hidden { margin-left: -250px;';\n"
"			\n"
"			if (regex.test(cssText)) {\n"
"				style.textContent = cssText.replace(regex, newRule);\n"
"			}\n"
"		});\n"
"	}\n"
"\n"
"	// í˜ì´ì§€ ë‚˜ê°€ê¸° í™•ì¸ ê¸°ëŠ¥\n"
"	function initBeforeUnloadWarning() {\n"
"		// beforeunload ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\n"
"		window.addEventListener('beforeunload', function(e) {\n"
"			// ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í–ˆê±°ë‚˜ unsaved changesê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ê²½ê³ \n"
"			if (hasExecutedQuery || hasUnsavedChanges) {\n"
"				var confirmationMessage = 'Are you sure you want to leave? Any unsaved work will be lost.';\n"
"				\n"
"				// í‘œì¤€ ë°©ë²•\n"
"				e.preventDefault();\n"
"				e.returnValue = confirmationMessage;\n"
"				\n"
"				// ì¼ë¶€ ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ fallback\n"
"				return confirmationMessage;\n"
"			}\n"
"		});\n"
"		\n"
"		// í…ìŠ¤íŠ¸ ì˜ì—­ ë³€ê²½ ê°ì§€\n"
"		var $queryTextarea = document.querySelector(\"#q\");\n"
"		var originalQuery = $queryTextarea.value;\n"
"		\n"
"		$queryTextarea.addEventListener('input', function() {\n"
"			var currentQuery = this.value.trim();\n"
"			var originalQueryTrimmed = originalQuery.trim();\n"
"			\n"
"			// ê¸°ë³¸ ì¿¼ë¦¬ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë‚´ìš©ì´ ìˆê³ , ì›ë˜ ì¿¼ë¦¬ì™€ ë‹¤ë¥´ë©´ unsaved changesë¡œ í‘œì‹œ\n"
"			if (currentQuery !== originalQueryTrimmed && \n"
"				currentQuery !== \"SHOW TABLES WHERE . OPTION -R\") {\n"
"				hasUnsavedChanges = true;\n"
"			} else {\n"
"				hasUnsavedChanges = false;\n"
"			}\n"
"		});\n"
"		\n"
"		// í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ì´ˆê¸° ìƒíƒœ ì„¤ì •\n"
"		setTimeout(function() {\n"
"			hasUnsavedChanges = false;\n"
"			hasExecutedQuery = false;\n"
"		}, 1000);\n"
"	}\n"
"\n"
"	var runSQL = function() {\n"
"		var $q = document.querySelector(\"#q\");\n"
"		var $u = document.querySelector(\"#u\");\n"
"		var q = $q.value.trim();\n"
"		var u = $u.value.trim();\n"
"		if (q == \"\")\n"
"			return;\n"
"\n"
"		// í˜ì´ì§€ ë‚˜ê°€ê¸° í™•ì¸ì„ ìœ„í•œ ìƒíƒœ ì—…ë°ì´íŠ¸\n"
"		hasExecutedQuery = true;\n"
"		hasUnsavedChanges = false; // ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ë©´ ì €ì¥ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼\n"
"\n"
"		// ì¿¼ë¦¬ë¥¼ íˆìŠ¤í† ë¦¬ì— ì¶”ê°€\n"
"		addToQueryHistory(q);\n"
"\n"
"		run(u, q, function(data) {\n"
"			rows(data);\n"
"		});\n"
"	};\n"
"\n"
"	(function() {\n"
"		document.querySelector(\"#btn-go\").addEventListener(\"click\", runSQL);\n"
"		\n"
"		// CSV ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥\n"
"		document.querySelector(\"#btn-download-csv\").addEventListener(\"click\", downloadCSV);\n"
"		\n"
"		// í…Œì´ë¸” ë ˆì´ì•„ì›ƒ í† ê¸€ ê¸°ëŠ¥\n"
"		document.querySelector(\"#btn-table-layout\").addEventListener(\"click\", toggleTableLayout);\n"
"		\n"
"		// íˆìŠ¤í† ë¦¬ í´ë¦¬ì–´ ê¸°ëŠ¥\n"
"		document.querySelector(\"#btn-clear-history\").addEventListener(\"click\", clearQueryHistory);\n"
"		\n"
"		// í˜ì´ì§€ ë‚˜ê°€ê¸° ê²½ê³  ë¦¬ì…‹ ê¸°ëŠ¥\n"
"		document.querySelector(\"#btn-reset-warning\").addEventListener(\"click\", resetLeaveWarning);\n"
"		\n"
"		// ì‚¬ì´ë“œë°” í† ê¸€ ê¸°ëŠ¥\n"
"		document.querySelector(\"#btn-toggle-sidebar\").addEventListener(\"click\", function() {\n"
"			var sidebar = document.querySelector(\".sidebar\");\n"
"			sidebar.classList.toggle(\"hidden\");\n"
"		});\n"
"		\n"
"		// ìƒˆë¡œê³ ì¹¨ ê¸°ëŠ¥\n"
"		document.querySelector(\"#btn-refresh\").addEventListener(\"click\", function() {\n"
"			loadTables();\n"
"		});\n"
"		\n"
"		document.addEventListener(\"DOMContentLoaded\", function() {\n"
"			loadTableLayoutSetting(); // í…Œì´ë¸” ë ˆì´ì•„ì›ƒ ì„¤ì • ë¡œë“œ\n"
"			initSidebarResizer(); // ì‚¬ì´ë“œë°” ë¦¬ì‚¬ì´ì € ì´ˆê¸°í™”\n"
"			initBeforeUnloadWarning(); // í˜ì´ì§€ ë‚˜ê°€ê¸° í™•ì¸ ì´ˆê¸°í™”\n"
"			loadQueryHistory(); // ì¿¼ë¦¬ íˆìŠ¤í† ë¦¬ ë¡œë“œ\n"
"			loadTables();\n"
"			runSQL();\n"
"		});\n"
"		\n"
"		document.querySelector(\"#q\").addEventListener(\"keydown\", function(e) {\n"
"			// ë””ë²„ê¹…ìš© ë¡œê·¸\n"
"			if (e.keyCode == 13) {\n"
"				console.log(\"Enter pressed - ctrlKey:\", e.ctrlKey, \"metaKey:\", e.metaKey, \"keyCode:\", e.keyCode);\n"
"			}\n"
"			\n"
"			if ((e.ctrlKey || e.metaKey) && e.keyCode == 13) {\n"
"				e.preventDefault();\n"
"				runSQL();\n"
"			}\n"
"		});\n"
"	})();\n"
"</script>\n"
"<style>\n"
"html, body {\n"
"	font-family: Consolas, \"Courier New\", Monaco, monospace, Camingocoderegular, \"DejaVu Sans Mono\";\n"
"	overflow: hidden;\n"
"	margin: 0;\n"
"	padding: 0;\n"
"}\n"
"\n"
".container {\n"
"	display: flex;\n"
"	height: 100vh;\n"
"}\n"
"\n"
".resizer {\n"
"	width: 4px;\n"
"	background-color: #ddd;\n"
"	cursor: col-resize;\n"
"	flex-shrink: 0;\n"
"	border-left: 1px solid #ccc;\n"
"	border-right: 1px solid #ccc;\n"
"	transition: background-color 0.2s ease;\n"
"}\n"
"\n"
".resizer:hover {\n"
"	background-color: #007acc;\n"
"}\n"
"\n"
".sidebar {\n"
"	width: 250px; /* ì‚¬ì´ë“œë°” í­ ì¦ê°€ */\n"
"	background-color: #f5f5f5;\n"
"	border-right: 1px solid #ccc;\n"
"	display: flex;\n"
"	flex-direction: column;\n"
"	transition: margin-left 0.3s ease;\n"
"}\n"
"\n"
".sidebar.hidden {\n"
"	margin-left: -250px;\n"
"}\n"
"\n"
".sidebar-header {\n"
"	padding: 10px;\n"
"	background-color: #e0e0e0;\n"
"	border-bottom: 1px solid #ccc;\n"
"	font-weight: bold;\n"
"	font-size: 14px;\n"
"	display: flex;\n"
"	align-items: center;\n"
"	justify-content: space-between;\n"
"}\n"
"\n"
".table-list {\n"
"	flex: 1;\n"
"	overflow-y: auto;\n"
"	padding: 5px;\n"
"}\n"
"\n"
".table-item {\n"
"	padding: 8px 10px;\n"
"	cursor: pointer;\n"
"	border-radius: 3px;\n"
"	margin-bottom: 2px;\n"
"	font-size: 13px;\n"
"	white-space: nowrap;\n"
"	overflow: hidden;\n"
"	text-overflow: ellipsis;\n"
"}\n"
"\n"
".table-item:hover {\n"
"	background-color: #d0d0d0;\n"
"}\n"
"\n"
".table-item-content {\n"
"	display: flex;\n"
"	align-items: center;\n"
"	gap: 8px;\n"
"}\n"
"\n"
".table-icon {\n"
"	font-size: 16px;\n"
"	flex-shrink: 0;\n"
"	width: 20px;\n"
"	height: 20px;\n"
"	display: flex;\n"
"	align-items: center;\n"
"	justify-content: center;\n"
"}\n"
"\n"
".table-icon.text-format {\n"
"	filter: brightness(1.2);\n"
"}\n"
"\n"
".table-icon.flint-format {\n"
"	filter: hue-rotate(200deg);\n"
"}\n"
"\n"
".table-icon.default-format {\n"
"	filter: grayscale(0.3);\n"
"}\n"
"\n"
".table-name {\n"
"	flex: 1;\n"
"	overflow: hidden;\n"
"	text-overflow: ellipsis;\n"
"	white-space: nowrap;\n"
"}\n"
"\n"
".table-menu {\n"
"	background-color: white;\n"
"	border: 1px solid #ccc;\n"
"	border-radius: 4px;\n"
"	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n"
"	z-index: 1002;\n"
"	min-width: 120px;\n"
"}\n"
"\n"
".menu-item {\n"
"	padding: 8px 12px;\n"
"	cursor: pointer;\n"
"	font-size: 13px;\n"
"	border-bottom: 1px solid #eee;\n"
"}\n"
"\n"
".menu-item:last-child {\n"
"	border-bottom: none;\n"
"}\n"
"\n"
".menu-item:hover {\n"
"	background-color: #f0f0f0;\n"
"}\n"
"\n"
".custom-tooltip {\n"
"	position: absolute;\n"
"	background-color: #333;\n"
"	color: white;\n"
"	padding: 8px 12px;\n"
"	border-radius: 6px;\n"
"	font-size: 12px;\n"
"	z-index: 1001;\n"
"	max-width: 300px;\n"
"	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n"
"	pointer-events: none;\n"
"}\n"
"\n"
".tooltip-title {\n"
"	font-weight: bold;\n"
"	margin-bottom: 6px;\n"
"	color: #ffd700;\n"
"	border-bottom: 1px solid #555;\n"
"	padding-bottom: 4px;\n"
"}\n"
"\n"
".tooltip-row {\n"
"	margin-bottom: 3px;\n"
"	display: flex;\n"
"}\n"
"\n"
".tooltip-label {\n"
"	font-weight: bold;\n"
"	min-width: 60px;\n"
"	color: #ccc;\n"
"}\n"
"\n"
".tooltip-value {\n"
"	color: white;\n"
"	word-break: break-all;\n"
"}\n"
"\n"
".main-content {\n"
"	flex: 1;\n"
"	display: flex;\n"
"	flex-direction: column;\n"
"	min-width: 0;\n"
"	overflow: hidden;\n"
"}\n"
"\n"
"#editor {\n"
"	display: flex;\n"
"	flex-direction: column;\n"
"	height: 100%;\n"
"	min-width: 0;\n"
"}\n"
"\n"
".scrollbar::-webkit-scrollbar {\n"
"	width: 8px;\n"
"	height: 8px;\n"
"}\n"
"\n"
".scrollbar::-webkit-scrollbar-track:vertical {\n"
"	border-radius: 8px;\n"
"}\n"
"\n"
".scrollbar::-webkit-scrollbar-thumb {\n"
"	background-color: rgba(0, 0, 0, 0.5);\n"
"	border-radius: 10px;\n"
"	border: 8px solid rgba(0, 0, 0, 0.25);\n"
"}\n"
"\n"
".scrollbar::-webkit-scrollbar-track {\n"
"	background-color: tranparent;\n"
"}\n"
"\n"
".scrollbar::-webkit-scrollbar-corner {\n"
"	background: transparent;\n"
"}\n"
"\n"
".toolbar {\n"
"	margin: 4px 4px;\n"
"	display: flex;\n"
"}\n"
"\n"
".toolbar-right {\n"
"	margin: auto;\n"
"	margin-right: 4px;\n"
"	display: flex;\n"
"}\n"
"\n"
".toolbar>div {\n"
"	display: inline;\n"
"}\n"
"\n"
".toolbar-right>button {\n"
"	padding: 6px 12px;\n"
"	border: 1px solid #ccc;\n"
"	background-color: #f8f8f8;\n"
"	cursor: pointer;\n"
"	border-radius: 3px;\n"
"	font-size: 13px;\n"
"	margin: auto;\n"
"	width: 140px;\n"
"}\n"
".toolbar-right>div>button:last-child {\n"
"	margin-right: 0;\n"
"}\n"
"\n"
".toolbar button:hover {\n"
"	background-color: #e8e8e8;\n"
"}\n"
"\n"
".toolbar button:disabled {\n"
"	background-color: #f0f0f0;\n"
"	color: #999;\n"
"	cursor: not-allowed;\n"
"	border-color: #ddd;\n"
"}\n"
"\n"
".toolbar button:disabled:hover {\n"
"	background-color: #f0f0f0;\n"
"}\n"
"\n"
"/* ìš”ì²­ ì§„í–‰ ì¤‘ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */\n"
".toolbar button.running {\n"
"	pointer-events: none;\n"
"	opacity: 0.6;\n"
"	background-color: #e0e0e0;\n"
"	cursor: not-allowed;\n"
"}\n"
"\n"
".editor {\n"
"	padding: 0 6px 0 4px;\n"
"	z-index: 1;\n"
"	position: relative;\n"
"}\n"
"\n"
"textarea {\n"
"	margin: 0;\n"
"	padding: 4px;\n"
"	resize: vertical;\n"
"	outline: none;\n"
"	box-shadow: none;\n"
"	width: 100%;\n"
"	height: 80px;\n"
"	border: 1px solid;\n"
"	box-sizing: border-box;\n"
"}\n"
"\n"
"#result {\n"
"	font-size: 15px;\n"
"	flex: 1;\n"
"	margin-top: 4px;\n"
"	margin-bottom: 4px;\n"
"	padding: 0 4px 0 4px;\n"
"	width: 100%;\n"
"	box-sizing: border-box;\n"
"	display: flex;\n"
"	flex-direction: column;\n"
"	min-height: 0;\n"
"	overflow: hidden;\n"
"}\n"
"\n"
".table-container {\n"
"	display: flex;\n"
"	flex-direction: column;\n"
"	height: 100%;\n"
"	min-height: 200px;\n"
"	overflow: auto;\n"
"	border-radius: 4px;\n"
"}\n"
"\n"
".data-table {\n"
"	width: 100%;\n"
"	border-collapse: collapse;\n"
"	font-size: 14px;\n"
"	background-color: white;\n"
"}\n"
"\n"
".data-table.fixed-layout {\n"
"	table-layout: fixed;\n"
"}\n"
"\n"
".data-table.auto-layout {\n"
"	table-layout: auto;\n"
"}\n"
"\n"
".data-table th {\n"
"	background-color: #f5f5f5;\n"
"	border: 1px solid #ddd;\n"
"	padding: 8px 12px;\n"
"	text-align: left;\n"
"	font-weight: 600;\n"
"	font-size: 13px;\n"
"	white-space: nowrap;\n"
"	overflow: hidden;\n"
"	text-overflow: ellipsis;\n"
"	position: sticky;\n"
"	top: 0;\n"
"	z-index: 10;\n"
"	user-select: none;\n"
"}\n"
"\n"
".data-table th.sortable {\n"
"	position: relative;\n"
"	padding-right: 30px;\n"
"}\n"
"\n"
".data-table th.sortable:hover {\n"
"	background-color: #e8e8e8;\n"
"}\n"
"\n"
".data-table th.sorted {\n"
"	background-color: #d4edda;\n"
"}\n"
"\n"
".sort-icon {\n"
"	position: absolute;\n"
"	right: 8px;\n"
"	top: 50%;\n"
"	transform: translateY(-50%);\n"
"	font-size: 12px;\n"
"	color: #666;\n"
"	font-weight: normal;\n"
"}\n"
"\n"
".data-table td {\n"
"	border: 1px solid #ddd;\n"
"	padding: 6px 12px;\n"
"	vertical-align: top;\n"
"	overflow: hidden;\n"
"	text-overflow: ellipsis;\n"
"	white-space: nowrap;\n"
"}\n"
"\n"
"/* Alignment based on inferred types */\n"
".data-table td.col-number { text-align: right; font-variant-numeric: tabular-nums; }\n"
".data-table td.col-date { text-align: center; }\n"
".data-table td.col-time { text-align: center; }\n"
"\n"
"/* Fixed ë ˆì´ì•„ì›ƒì¼ ë•Œ ì»¬ëŸ¼ ë„ˆë¹„ ì œí•œ */\n"
".data-table.fixed-layout td {\n"
"	max-width: 300px;\n"
"}\n"
"\n"
"/* Auto ë ˆì´ì•„ì›ƒì¼ ë•ŒëŠ” ì»¬ëŸ¼ ë„ˆë¹„ ì œí•œ ì—†ìŒ */\n"
".data-table.auto-layout td {\n"
"	max-width: none;\n"
"}\n"
"\n"
".data-table td.multiline {\n"
"	white-space: pre-wrap !important;\n"
"	max-width: none !important;\n"
"	min-width: 400px;\n"
"	max-height: 200px;\n"
"	overflow-y: auto;\n"
"	font-family: 'Courier New', Consolas, monospace;\n"
"	font-size: 12px;\n"
"	line-height: 1.4;\n"
"	background-color: #f9f9f9;\n"
"}\n"
"\n"
".data-table td.null-value {\n"
"	color: #999;\n"
"	font-style: italic;\n"
"}\n"
"\n"
".data-table td.null-value:empty::after {\n"
"	content: 'NULL';\n"
"}\n"
"\n"
".data-table tbody tr:hover {\n"
"	background-color: #f0f8ff;\n"
"}\n"
"\n"
".data-table tbody tr:nth-child(even) {\n"
"	background-color: #fafafa;\n"
"}\n"
"\n"
".data-table tbody tr:nth-child(even):hover {\n"
"	background-color: #f0f8ff;\n"
"}\n"
"\n"
"/* Single column í…Œì´ë¸” */\n"
".data-table.single-column {\n"
"	table-layout: fixed;\n"
"}\n"
"\n"
".data-table.single-column th,\n"
".data-table.single-column td {\n"
"	width: 100%;\n"
"	max-width: none;\n"
"}\n"
"\n"
"/* Query History ìŠ¤íƒ€ì¼ */\n"
".query-history-list {\n"
"	flex: 1;\n"
"	overflow-y: auto;\n"
"	padding: 5px;\n"
"	border-top: 1px solid #ccc;\n"
"	max-height: 300px;\n"
"	display: flex;\n"
"	flex-direction: column;\n"
"}\n"
"\n"
".history-items { flex: 1; overflow-y: auto; }\n"
"\n"
".icon-btn {\n"
"	background: none;\n"
"	border: none;\n"
"	cursor: pointer;\n"
"	font-size: 14px;\n"
"	padding: 2px 4px;\n"
"	line-height: 1;\n"
"	border-radius: 4px;\n"
"}\n"
"\n"
".icon-btn:hover { background-color: #d5d5d5; }\n"
"\n"
".icon-btn:active { background-color: #c0c0c0; }\n"
"\n"
".history-item {\n"
"	padding: 8px 10px;\n"
"	cursor: pointer;\n"
"	border-radius: 3px;\n"
"	margin-bottom: 3px;\n"
"	font-size: 12px;\n"
"	border: 1px solid #e0e0e0;\n"
"	background-color: white;\n"
"	position: relative;\n"
"}\n"
"\n"
".history-item:hover {\n"
"	background-color: #f0f0f0;\n"
"	border-color: #ccc;\n"
"}\n"
"\n"
".history-query {\n"
"	font-weight: 500;\n"
"	margin-bottom: 3px;\n"
"	color: #333;\n"
"	white-space: nowrap;\n"
"	overflow: hidden;\n"
"	text-overflow: ellipsis;\n"
"	padding-right: 20px;\n"
"}\n"
"\n"
".history-time {\n"
"	font-size: 10px;\n"
"	color: #666;\n"
"	margin-bottom: 2px;\n"
"}\n"
"\n"
".history-delete {\n"
"	position: absolute;\n"
"	top: 5px;\n"
"	right: 5px;\n"
"	background: none;\n"
"	border: none;\n"
"	color: #999;\n"
"	cursor: pointer;\n"
"	font-size: 14px;\n"
"	width: 16px;\n"
"	height: 16px;\n"
"	display: flex;\n"
"	align-items: center;\n"
"	justify-content: center;\n"
"	border-radius: 2px;\n"
"}\n"
"\n"
".history-delete:hover {\n"
"	background-color: #ff4444;\n"
"	color: white;\n"
"}\n"
"\n"
".history-empty {\n"
"	padding: 10px;\n"
"	text-align: center;\n"
"	color: #999;\n"
"	font-size: 11px;\n"
"	font-style: italic;\n"
"}\n"
"</style>\n"
